---
title: 'Uninstall the infrastructure agent '
contentType: page
template: basicDoc
topics:
  - Infrastructure
  - Install the infrastructure agent
  - Update or uninstall
japaneseVersion: ''
---

Your hosts are added automatically when you install the infrastructure agent for your [Linux](/docs/infrastructure/new-relic-infrastructure/installation/install-infrastructure-linux) or [Windows](/docs/infrastructure/new-relic-infrastructure/installation/install-infrastructure-windows-server) operating system, or [update](/docs/infrastructure/new-relic-infrastructure/installation/update-infrastructure-agent) the agent. Similarly, your hosts disappear automatically when you uninstall the agent. You do not need to manually add or remove your hosts.

Uninstalling the agent does not directly affect any of your [integrations](/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure). To uninstall an integration, see [Uninstall integrations](/docs/infrastructure/install-configure-infrastructure/update-or-uninstall/uninstall-integrations).

## Uninstall the Linux infrastructure agent

If you used the default install procedure for your infrastructure agent for Linux environments, use your package management tools to uninstall it. You do not need to stop the service before running the uninstall command.

<CollapserGroup>
  <Collapser
    id="apt-uninstall"
    title={<>Uninstall with apt (Debian, Ubuntu)</>}
  >
    Execute the following command as root:

    ```
    sudo apt-get remove newrelic-infra
    ```
  </Collapser>

  <Collapser
    id="yum-uninstall"
    title={<>Uninstall with yum (Amazon Linux, CentOS, RHEL)</>}
  >
    Execute the following command as root:

    ```
    sudo yum remove newrelic-infra
    ```
  </Collapser>

  <Collapser
    id="zipper-uninstall"
    title={<>Uninstall with Zypper (SLES)</>}
  >
    Execute the following command as root:

    ```
    sudo zypper -n remove newrelic-infra
    ```
  </Collapser>
</CollapserGroup>

If you followed an [assisted](/docs/infrastructure/install-configure-infrastructure/linux-installation/assisted-install-infrastructure-linux) or [manual](/docs/infrastructure/install-configure-infrastructure/linux-installation/manual-install-infrastructure-linux) installation process, you need to manually delete all the files created when you unpacked the agent file.

<Callout variant="important">
  Since there are are no automated scripts, old files may remain when you uninstall. Be sure to manually remove outdated files.
</Callout>

## Uninstall the ![Windows Server icon](./images/Windows_Server_logo_small.png "Windows Server") Windows infrastructure agent

<Callout variant="tip">
  Requires [Administrator rights](/docs/infrastructure/new-relic-infrastructure/getting-started/compatibility-requirements-new-relic-infrastructure#permissions) in your Windows admin group.
</Callout>

If you used the default install procedure for the infrastructure agent for Windows environments, to uninstall:

1. [Stop the infrastructure agent](/docs/infrastructure/new-relic-infrastructure/configuration/start-stop-restart-check-infrastructure-agent-status#windows).
2. From the Windows **Control Panel**, use the **Add/Remove Programs and Features** tool to uninstall the infrastructure agent.
3. From the Windows **Program Files**, manually delete the New Relic folder to delete all files associated with the infrastructure agent for Windows.

If you followed an [assisted](/docs/infrastructure/install-configure-infrastructure/windows-installation/assisted-install-infrastructure-windows) or [manual](/docs/infrastructure/install-configure-infrastructure/windows-installation/manual-install-infrastructure-windows) installation process, you need to manually delete all the files created when you unpacked the agent file.

<Callout variant="important">
  Since there are are no automated scripts, old files may remain when you uninstall. Be sure to manually remove outdated files.
</Callout>

## Uninstall using config management tools

To uninstall the infrastructure agent if you used a configuration management tool:

<Table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        **Config management tools**
      </th>

      <th>
        **Uninstall New Relic infrastructure agent**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [Ansible](/docs/infrastructure/new-relic-infrastructure/config-management-tools/configure-new-relic-infrastructure-using-ansible)
      </td>

      <td>
        Set the [`'agent_state'`](/docs/infrastructure/new-relic-infrastructure/config-management-tools/configure-new-relic-infrastructure-using-ansible#role-config) parameter to `'absent'`
      </td>
    </tr>

    <tr>
      <td>
        [Chef](/docs/infrastructure/new-relic-infrastructure/config-management-tools/configure-new-relic-infrastructure-using-chef)
      </td>

      <td>
        Set the [`'agent_action'`](/docs/infrastructure/new-relic-infrastructure/config-management-tools/configure-new-relic-infrastructure-using-chef#attributes) node to `uninstall`
      </td>
    </tr>

    <tr>
      <td>
        [AWS Elastic Beanstalk](/docs/infrastructure/install-infrastructure-agent/config-management-tools/install-infrastructure-agent-aws-elastic-beanstalk)
      </td>

      <td>
        Remove `newrelic.config` from `.ebextensions`, then deploy.
      </td>
    </tr>

    <tr>
      <td>
        [Puppet](/docs/infrastructure/new-relic-infrastructure/config-management-tools/configure-new-relic-infrastructure-puppet)
      </td>

      <td>
        Set the [`'ensure'`](/docs/infrastructure/new-relic-infrastructure/config-management-tools/configure-new-relic-infrastructure-puppet#reference) parameter to `'absent'`
      </td>
    </tr>
  </tbody>
</Table>

## Optional: Purge remaining files

If you use standard package management tools for your selected platform, the uninstall process typically leaves configuration and other miscellaneous files. If you need to completely purge any of the remaining files after uninstalling the New Relic infrastructure agent, follow standard procedures for your operating system.
